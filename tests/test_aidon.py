from pprint import pprint
from readams.meterdecode import aidon
import logging

logging.basicConfig(level=logging.DEBUG)


class TestDecodeAidon:
    aidon_list_1 = bytes.fromhex('e6e7000f40000000000101020309060100010700ff060000011802020f00161b')
    aidon_list_2 = bytes.fromhex('e6e7000f4000000000010c020209060101000281ff0a0b4149444f4e5f5630303031020209060000600100ff0a1037333539393932383932353837363635020209060000600107ff0a0436353235020309060100010700ff060000011802020f00161b020309060100020700ff060000000002020f00161b020309060100030700ff060000000002020f00161d020309060100040700ff060000008002020f00161d0203090601001f0700ff10000d02020fff1621020309060100470700ff10000902020fff1621020309060100200700ff1208e202020fff1623020309060100340700ff1208fd02020fff1623020309060100480700ff12090402020fff1623')
    aidon_list_3 = bytes.fromhex('e6e7000f40000000000111020209060101000281ff0a0b4149444f4e5f5630303031020209060000600100ff0a1037333539393932383932353837363635020209060000600107ff0a0436353235020309060100010700ff060000011802020f00161b020309060100020700ff060000000002020f00161b020309060100030700ff060000000002020f00161d020309060100040700ff060000008002020f00161d0203090601001f0700ff10000d02020fff1621020309060100470700ff10000902020fff1621020309060100200700ff1208e402020fff1623020309060100340700ff1208ff02020fff1623020309060100480700ff12090502020fff1623020209060000010000ff090c07e4011502100000ff000000020309060100010800ff060022ab8a02020f01161e020309060100020800ff060000000002020f01161e020309060100030800ff060000e38302020f011620020309060100040800ff0600029b5b02020f011620')

    def test_decode_list_1(self):
        msg = aidon.LlcPdu.parse(self.aidon_list_1)
        print(msg)

    def test_decode_list_2(self):
        msg = aidon.LlcPdu.parse(self.aidon_list_2)
        print(msg)

    def test_decode_list_3(self):
        msg = aidon.LlcPdu.parse(self.aidon_list_3)
        print(msg)

    def test_decode_frame_list_1(self):
        decoded = aidon.decode_frame(self.aidon_list_1)
        pprint(decoded)

    def test_decode_frame_list_2(self):
        decoded = aidon.decode_frame(self.aidon_list_2)
        pprint(decoded)

    def test_decode_frame_list_3(self):
        decoded = aidon.decode_frame(self.aidon_list_3)
        pprint(decoded)
